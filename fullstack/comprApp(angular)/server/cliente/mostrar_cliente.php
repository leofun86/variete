<?php
/*
------------------------------------------------------------------------------
------------------------------------------------------------------------------

---- ██╗░░░░░███████╗░█████╗░  ███████╗██╗░░░██╗███╗░░██╗███████╗░██████╗ ---- 
---- ██║░░░░░██╔════╝██╔══██╗  ██╔════╝██║░░░██║████╗░██║██╔════╝██╔════╝ ---- 
---- ██║░░░░░█████╗░░██║░░██║  █████╗░░██║░░░██║██╔██╗██║█████╗░░╚█████╗░ ---- 
---- ██║░░░░░██╔══╝░░██║░░██║  ██╔══╝░░██║░░░██║██║╚████║██╔══╝░░░╚═══██╗ ---- 
---- ███████╗███████╗╚█████╔╝  ██║░░░░░╚██████╔╝██║░╚███║███████╗██████╔╝ ---- 
---- ╚══════╝╚══════╝░╚════╝░  ╚═╝░░░░░░╚═════╝░╚═╝░░╚══╝╚══════╝╚═════╝░ ---- 

---- Prueba Fullstack para IBEC Internacional --------------------------------
---- leorecord@hotmail.com ---------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------
*/
    header("Access-Control-Allow-Origin: http://localhost:4200");
    require '../conexion.php';
    sleep(2);

    $mysqli->set_charset('utf8');

    $new_request=$mysqli->prepare("SELECT * FROM clientes");
    $new_request->execute();
    $result = $new_request->get_result();

      if ($result->num_rows > 0) {
        $data=[];
        while($regs = $result->fetch_array()) { 
          $data[]=$regs;
        }
        //echo $cliente;
        //echo '<br>----------------------';
        //echo '<br>----------------------<br>';
        //echo $producto;
        //echo '<br>----------------------';
        //echo '<br>----------------------<br>';
        echo json_encode($data);
      } else { echo json_encode(array('error' => true)); }
      $new_request->close();
    $mysqli->close();
?>